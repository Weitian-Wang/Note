<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>CS250P Computer System Architecture</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.13.24"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

/* From extension ms-toolsai.jupyter */
/* These classnames are inherited from bootstrap, but are present in most notebook renderers */

.alert {
    width: auto;
    padding: 1em;
    margin-top: 1em;
    margin-bottom: 1em;
}
.alert > *:last-child {
    margin-bottom: 0;
}
#preview > .alert:last-child {
    /* Prevent this being set to zero by the default notebook stylesheet */
    padding-bottom: 1em;
}

.alert-success {
    /* Note there is no suitable color available, so we just copy "info" */
    background-color: var(--theme-info-background);
    color: var(--theme-info-foreground);
}
.alert-info {
    background-color: var(--theme-info-background);
    color: var(--theme-info-foreground);
}
.alert-warning {
    background-color: var(--theme-warning-background);
    color: var(--theme-warning-foreground);
}
.alert-danger {
    background-color: var(--theme-error-background);
    color: var(--theme-error-foreground);
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <ul>
<li><a href="#cs250p-computer-system-architecture">CS250P Computer System Architecture</a>
<ul>
<li><a href="#grading">Grading</a></li>
<li><a href="#motivation">Motivation</a>
<ul>
<li><a href="#end-of-moores-law">End of Moore's Law</a></li>
<li><a href="#end-of-dennard-scaling">End of Dennard Scaling</a></li>
<li><a href="#solution">Solution</a></li>
</ul>
</li>
<li><a href="#hardware---software-interface">Hardware - Software Interface</a>
<ul>
<li><a href="#concept-of-abstraction">Concept of Abstraction</a></li>
<li><a href="#isa---instruction-set-architecture">ISA - Instruction Set Architecture</a>
<ul>
<li><a href="#definition">Definition</a></li>
<li><a href="#where-is-isa">Where is ISA</a></li>
<li><a href="#types-of-isa">Types of ISA</a></li>
</ul>
</li>
<li><a href="#performance-measurements">Performance Measurements</a>
<ul>
<li><a href="#cpu-clock">CPU Clock</a></li>
<li><a href="#cpu-time">CPU Time</a></li>
<li><a href="#instruction-count">Instruction Count</a></li>
<li><a href="#cycle-per-instruction---cpi">Cycle per Instruction - CPI</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#isa-classification">ISA Classification</a>
<ul>
<li><a href="#risc---reduced-instruction-set-computer">RISC - Reduced Instruction Set Computer</a></li>
<li><a href="#cisc---complex-instruction-set-computer">CISC - Complex Instruction Set Computer</a></li>
</ul>
</li>
<li><a href="#risc-v">RISC-V</a></li>
<li><a href="#x86">x86</a></li>
<li><a href="#risc-v-assembly--x86-assembly">RISC-V Assembly &amp; x86 Assembly</a></li>
<li><a href="#digital-circuits">Digital Circuits</a>
<ul>
<li><a href="#why-digital-over-analog">Why Digital Over Analog</a>
<ul>
<li><a href="#disadvantage-of-analog-computer">Disadvantage of Analog Computer</a></li>
<li><a href="#advantage-of-digital-computer">Advantage of Digital Computer</a></li>
</ul>
</li>
<li><a href="#types-of-digital-circuits">Types of Digital Circuits</a></li>
<li><a href="#combinational-circuit">Combinational Circuit</a>
<ul>
<li><a href="#timing-specifications-of-combinational-circuits">Timing Specifications of Combinational Circuits</a></li>
<li><a href="#propagation-delay-of-combinational-circuits">Propagation Delay of Combinational Circuits</a></li>
<li><a href="#contamination-delay-of-combinational-circuits">Contamination Delay of Combinational Circuits</a></li>
</ul>
</li>
<li><a href="#sequential-circuit">Sequential Circuit</a></li>
</ul>
</li>
<li><a href="#pipeline">Pipeline</a>
<ul>
<li><a href="#improve-combinational-circuit">Improve Combinational Circuit</a>
<ul>
<li><a href="#problem-with-combinational-circuit-without-pipeline">Problem With Combinational Circuit Without Pipeline</a></li>
<li><a href="#goal">Goal</a></li>
<li><a href="#measurement-of-system-performance">Measurement of System Performance</a></li>
</ul>
</li>
<li><a href="#solution---pipeline">Solution - Pipeline</a>
<ul>
<li><a href="#definition-1">Definition</a></li>
<li><a href="#latency--throughput-in-k-stage-pipeline">Latency &amp; Throughput in K-Stage Pipeline</a></li>
</ul>
</li>
<li><a href="#example-pipelining-question">Example Pipelining Question</a>
<ul>
<li><a href="#latency-and-throughput-without-pipelining">Latency and Throughput without Pipelining</a></li>
<li><a href="#latency-with-4-stage-pipeline">Latency with 4-Stage Pipeline</a></li>
</ul>
</li>
<li><a href="#risc-pipeline">RISC Pipeline</a>
<ul>
<li><a href="#von-neumann-model">Von Neumann Model</a></li>
<li><a href="#five-stage-pipeline">Five Stage Pipeline</a></li>
<li><a href="#3-stage-pipeline-analysis">3-Stage Pipeline Analysis</a></li>
<li><a href="#why-5-stage-ideally-balanced-pipeline">Why 5-Stage? Ideally Balanced Pipeline</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#pipeline-hazard">Pipeline Hazard</a>
<ul>
<li><a href="#read-after-write-data-hazard">Read-After-Write Data Hazard</a>
<ul>
<li><a href="#example-1">Example 1</a></li>
<li><a href="#example-2">Example 2</a></li>
</ul>
</li>
<li><a href="#load-use-data-hazard">Load-Use Data Hazard</a>
<ul>
<li><a href="#example">Example</a></li>
</ul>
</li>
<li><a href="#control-hazard">Control Hazard</a>
<ul>
<li><a href="#example-1">Example</a></li>
</ul>
</li>
<li><a href="#other-situations-and-hazards">Other Situations and Hazards</a></li>
<li><a href="#solution-1">Solution</a>
<ul>
<li><a href="#stall">Stall</a></li>
<li><a href="#forward">Forward</a></li>
<li><a href="#non-architecture-solution">Non-architecture Solution</a></li>
<li><a href="#branch-delay-slot">Branch Delay Slot</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#branch-prediction">Branch Prediction</a>
<ul>
<li><a href="#branch-predictor">Branch Predictor</a>
<ul>
<li><a href="#static-branch-prediction">Static Branch Prediction</a></li>
<li><a href="#dynamic-branch-prediction">Dynamic Branch Prediction</a></li>
</ul>
</li>
<li><a href="#handle-mis-prediction">Handle Mis-prediction</a>
<ul>
<li><a href="#example-handle-method---epoch-based">Example Handle Method - Epoch Based</a></li>
</ul>
</li>
<li><a href="#example-1-bit-predictor">Example 1-bit Predictor</a></li>
<li><a href="#example-2-bit-predictor">Example 2-bit Predictor</a></li>
<li><a href="#other-improvements">Other Improvements</a>
<ul>
<li><a href="#branchless-programming">Branchless Programming</a></li>
<li><a href="#compiler-loop-unrolling">Compiler Loop Unrolling</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#superscale">Superscale</a></li>
<li><a href="#memory-system-and-cache">Memory System and Cache</a>
<ul>
<li><a href="#motivation-1">Motivation</a></li>
<li><a href="#sram--dram">SRAM &amp; DRAM</a>
<ul>
<li><a href="#sram">SRAM</a></li>
<li><a href="#dram">DRAM</a></li>
</ul>
</li>
<li><a href="#cache">Cache</a>
<ul>
<li><a href="#multi-layer-cache-architecture">Multi-Layer Cache Architecture</a></li>
</ul>
</li>
<li><a href="#cache-operation">Cache Operation</a>
<ul>
<li><a href="#basic-unit-of-cache-operation">Basic Unit of Cache Operation</a></li>
<li><a href="#fetch-data-to-cache">Fetch Data to Cache</a></li>
<li><a href="#access-data">Access Data</a></li>
</ul>
</li>
<li><a href="#cache-miss">Cache Miss</a>
<ul>
<li><a href="#compulsory-misses">Compulsory Misses</a></li>
<li><a href="#capacity-misses">Capacity Misses</a></li>
<li><a href="#conflic-misses">Conflic Misses</a></li>
</ul>
</li>
<li><a href="#cache-schemes">Cache Schemes</a>
<ul>
<li><a href="#direct-mapped-cache">Direct Mapped Cache</a>
<ul>
<li><a href="#why-use-lower-bits">Why use lower bits?</a></li>
<li><a href="#how-do-we-know-block-in-cache">How do we know block in cache?</a></li>
<li><a href="#how-to-load-a-multi-byte-block">How to load a multi-byte block?</a></li>
</ul>
</li>
<li><a href="#fully-associative">Fully Associative</a></li>
<li><a href="#n-way-set-associative">N-way Set Associative</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="cs250p-computer-system-architecture">CS250P Computer System Architecture</h1>
<h2 id="grading">Grading</h2>
<ol>
<li>Homework 50%</li>
<li>Mid term 25%</li>
<li>Final 25%</li>
</ol>
<h2 id="motivation">Motivation</h2>
<pre><code><code><div>Moore's Law
The number of transistors on an integrated circuit will double every two years.

   +

Dennard Scaling
As transistors get smaller, their power density stays constant.
Length▼ Voltage▼ Current▼

   │
   ▼

The tech journalists' narrative:
&quot;Hardware performace doubles each year.&quot;
</div></code></code></pre>
<h3 id="end-of-moores-law">End of Moore's Law</h3>
<p>Due to physical limitations and rising costs, the transistors can't be smaller.</p>
<h3 id="end-of-dennard-scaling">End of Dennard Scaling</h3>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mi>o</mi><mi>w</mi><mi>e</mi><mi>r</mi><mo>∝</mo><mi>l</mi><mi>e</mi><mi>a</mi><mi>k</mi><mi>a</mi><mi>g</mi><msub><mi>e</mi><mrow><mo stretchy="false">(</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>c</mi><mo stretchy="false">)</mo></mrow></msub><mo>+</mo><mi>α</mi><mo>∗</mo><msub><mrow><mi>C</mi><mi>F</mi><msup><mi>V</mi><mn>2</mn></msup></mrow><mrow><mo stretchy="false">(</mo><mi>d</mi><mi>y</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>i</mi><mi>c</mi><mo stretchy="false">)</mo></mrow></msub><mspace linebreak="newline"></mspace><mi>α</mi><mo>=</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>t</mi><mspace linebreak="newline"></mspace><mi>C</mi><mo>=</mo><mi>C</mi><mi>a</mi><mi>p</mi><mi>a</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mspace linebreak="newline"></mspace><mi>F</mi><mo>=</mo><mi>F</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>n</mi><mi>c</mi><mi>y</mi><mspace linebreak="newline"></mspace><mi>V</mi><mo>=</mo><mi>V</mi><mi>o</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">power \propto leakage_{(static)} + \alpha * {CFV^2}_{(dynamic)}\\ 
\alpha = constant\\ 
C = Capacitance\\ 
F = Frequency\\ 
V = Voltage\\ 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0496em;vertical-align:-0.3552em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">aka</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">c</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2193em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">CF</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="mord mathnormal mtight">nami</span><span class="mord mathnormal mtight">c</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord mathnormal">t</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">a</span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord mathnormal">ce</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em;">cy</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal">o</span><span class="mord mathnormal">lt</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span></span><span class="mspace newline"></span></span></span></span></p>
<blockquote>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∝</mo></mrow><annotation encoding="application/x-tex">\propto</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mrel">∝</span></span></span></span>: proportional to</p>
</blockquote>
<p>Idealy, as the size of transistor shrinks, voltage was reduced. So we can affort to operate the chip at higher frequency at the same power.<br>
However leakage power (static baseline power) is proportional to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mrow><mi>v</mi><mi>o</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">{1}\over{voltage}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3262em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">lt</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>.<br>
Therefore power density of chip is increased as transistors get smaller.</p>
<h3 id="solution">Solution</h3>
<ol>
<li>Multicore + Multithread - has limitations too!</li>
<li>Larger Chip - M1 Chip</li>
<li>Task specific chips - i.e. video encode/decode</li>
</ol>
<h2 id="hardware---software-interface">Hardware - Software Interface</h2>
<h3 id="concept-of-abstraction">Concept of Abstraction</h3>
<p>Hide low level detail to deal with more complicated stuff.<br>
Examples:</p>
<ol>
<li>API - Application Programming Interface</li>
<li>System Calls</li>
<li>ABI - Application Binary Interface</li>
<li><strong>ISA</strong> - Instruction Set Architecture</li>
</ol>
<h3 id="isa---instruction-set-architecture">ISA - Instruction Set Architecture</h3>
<h4 id="definition">Definition</h4>
<p>The abstraction between software and hardware (Hardware/Software Interface).</p>
<h4 id="where-is-isa">Where is ISA</h4>
<pre><code><code><div>High-level Language        a = a + 1

     │
     │  compiler
     ▼

Assembly Language          add x6,1,x6

     │
     │  assembler
     ▼

Hardware Representation    000101011 &lt;-ISA-&gt; Hardware
</div></code></code></pre>
<h4 id="types-of-isa">Types of ISA</h4>
<ol>
<li>RISC - Reduceed Instruction Set Computer</li>
<li>CISC - Complex Instruction Set Computer</li>
</ol>
<h3 id="performance-measurements">Performance Measurements</h3>
<p>Define <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Performance</mtext><mo>=</mo><mfrac><mn>1</mn><mtext>Execution Time</mtext></mfrac></mrow><annotation encoding="application/x-tex">\text{Performance} = \frac{1}{\text{Execution Time}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">Performance</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Execution Time</span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, the measurements of performance is corelated to the measurements of execution time. We will ignore I/O time, idle time and focus on <strong>CPU time</strong>.</p>
<h4 id="cpu-clock">CPU Clock</h4>
<p>The constant-rate clock governing digital hardwares.</p>
<ul>
<li>Clock Cycle Time(Clock Period): Duration of one clock cycle. Unit nanoseconds.</li>
<li>Clock Frequency(Clock Rate): Cycles per second. Unit Giga Hertz.</li>
</ul>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Period</mtext><mo>=</mo><mfrac><mn>1</mn><mtext>Frequency</mtext></mfrac></mrow><annotation encoding="application/x-tex">\text{Period} = \frac{1}{\text{Frequency}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">Period</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2019em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">Frequency</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<h4 id="cpu-time">CPU Time</h4>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>CPU Time</mtext><mo>=</mo><mtext>#Cycles</mtext><mo>×</mo><mtext>Period</mtext><mo>=</mo><mfrac><mtext>#Cycles</mtext><mtext>Frequency</mtext></mfrac></mrow><annotation encoding="application/x-tex">\text{CPU Time} = \text{\#Cycles} \times \text{Period} = \frac{\text{\#Cycles}}{\text{Frequency}} 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">CPU Time</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">#Cycles</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">Period</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2519em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">Frequency</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">#Cycles</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>To improve CPU time (performance)</p>
<ol>
<li>Reduce number of cycles</li>
<li>Reduce cycle time by increasing frequency</li>
</ol>
<h4 id="instruction-count">Instruction Count</h4>
<p>Total number of instructions of a program, determined by program, ISA and compiler.</p>
<h4 id="cycle-per-instruction---cpi">Cycle per Instruction - CPI</h4>
<p>Number of clock cycle per instruction is determined by CPU hardware and the type of instruction. For RISC CPI is constant and for CISC we are talking about <strong>average</strong> CPI.</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>#Cycles</mtext><mo>=</mo><mtext>#Instruction</mtext><mo>×</mo><mtext>Cycle per Instruction</mtext></mrow><annotation encoding="application/x-tex">\text{\#Cycles} = \text{\#Instruction} \times \text{Cycle per Instruction}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">#Cycles</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">#Instruction</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Cycle per Instruction</span></span></span></span></span></span></p>
<h4 id="conclusion">Conclusion</h4>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>CPU Time</mtext><mo>=</mo><mfrac><mrow><mtext>#Instruction</mtext><mo>×</mo><mtext>CPI</mtext></mrow><mtext>Frequency</mtext></mfrac></mrow><annotation encoding="application/x-tex">\text{CPU Time} = \frac{\text{\#Instruction} \times \text{CPI}}{\text{Frequency}} 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">CPU Time</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2519em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">Frequency</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">#Instruction</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord text"><span class="mord">CPI</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>Factors that influence performance:</p>
<ol>
<li>Algorithm: instruction count</li>
<li>Programming Language: instruction count</li>
<li>Compiler: instruction count &amp; CPI</li>
<li>Instruction Set Architecture: instruction count &amp; CPI &amp; clock speed</li>
</ol>
<p>To improve CPU time, as the measurement of performance, the ISA design needs to feature:</p>
<ol>
<li>Low instruction count</li>
<li>Low CPI</li>
<li>High frequency (clock speed)</li>
</ol>
<h2 id="isa-classification">ISA Classification</h2>
<h3 id="risc---reduced-instruction-set-computer">RISC - Reduced Instruction Set Computer</h3>
<ul>
<li>Small number of general instructions</li>
<li>Computation performed in register</li>
<li>Memory acceess is different instructions</li>
<li>Fixed length instruction encoding</li>
<li>Complex instruction was composed of general instructions</li>
</ul>
<p>Examples: RISC-V, ARM(Advanced RISC Machine)</p>
<h3 id="cisc---complex-instruction-set-computer">CISC - Complex Instruction Set Computer</h3>
<ul>
<li>Large number of complex instructions</li>
<li>Various memory and register modes per instruction</li>
<li>Varible length instruction encoding</li>
</ul>
<p>Examples: Intel x86</p>
<h2 id="risc-v">RISC-V</h2>
<p><a href="https://www.ics.uci.edu/~swjun/courses/2022F-CS250P/materials/lec3%20-%20RISC-V,%20x86%20Assembly.pdf">RISC-V</a></p>
<h2 id="x86">x86</h2>
<p><a href="https://www.ics.uci.edu/~swjun/courses/2022F-CS250P/materials/lec3%20-%20RISC-V,%20x86%20Assembly.pdf">x86</a></p>
<h2 id="risc-v-assembly--x86-assembly">RISC-V Assembly &amp; x86 Assembly</h2>
<p><a href="https://www.ics.uci.edu/~swjun/courses/2022F-CS250P/materials/lec3.5%20-%20RISC-V,%20x86%20Assembly%20Encoding.pdf">ISA Encoding Comparison(Red Commented Part)</a></p>
<h2 id="digital-circuits">Digital Circuits</h2>
<h3 id="why-digital-over-analog">Why Digital Over Analog</h3>
<h4 id="disadvantage-of-analog-computer">Disadvantage of Analog Computer</h4>
<p>Analog computers are susceptible to noise, distortion, and interference. Noise is accumulated at each component.</p>
<h4 id="advantage-of-digital-computer">Advantage of Digital Computer</h4>
<ol>
<li>Noise is cancelled at each digital component, as each digital component can generate a new &amp; cleaner signal.</li>
<li>Complex designs can be achieved on the abstraction of digital behavior.</li>
</ol>
<h3 id="types-of-digital-circuits">Types of Digital Circuits</h3>
<ol>
<li>Combinational - output is function of current input</li>
<li>Sequential - output depends on the sequence of past inputs</li>
</ol>
<h3 id="combinational-circuit">Combinational Circuit</h3>
<p>Components:</p>
<ol>
<li>Input</li>
<li>Output</li>
<li>Function Specifications</li>
<li>Timing Specifications</li>
</ol>
<h4 id="timing-specifications-of-combinational-circuits">Timing Specifications of Combinational Circuits</h4>
<ol>
<li>Propagation Delay <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mrow><mi>P</mi><mi>D</mi></mrow></msub></mrow><annotation encoding="application/x-tex">t_{PD}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>
<ul>
<li>The <strong>maximum</strong> time delay from <strong>valid</strong> input to <strong>valid</strong> output.</li>
<li>Restrict of how fast an input can be comsumed. The input signal must be held long enough for generating an valid output.</li>
</ul>
</li>
<li>Contamination Delay <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mrow><mi>C</mi><mi>D</mi></mrow></msub></mrow><annotation encoding="application/x-tex">t_{CD}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>
<ul>
<li>The <strong>minimum</strong> time delay from when input <strong>starts</strong> to change to output <strong>starts</strong> to change.</li>
<li>Within contamination delay time, change to input will not affect output signal.</li>
</ul>
</li>
</ol>
<h4 id="propagation-delay-of-combinational-circuits">Propagation Delay of Combinational Circuits</h4>
<p>Overall delay of a circuit is determined by <strong>critical path</strong>, which is the longest possible path of a circuit. Longer delay will limit the clock speed (longer period &amp; lower frequency).</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Overall </mtext><msub><mi>t</mi><mrow><mi>P</mi><mi>D</mi></mrow></msub><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>t</mi><mrow><mi>P</mi><msub><mi>D</mi><mi>i</mi></msub></mrow></msub><mtext> for each component in critical path</mtext></mrow><annotation encoding="application/x-tex">\text{Overall } t_{PD} = \sum_{i=1}^{n} t_{PD_i} \text{  for each component in critical path}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord text"><span class="mord">Overall </span></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mord text"><span class="mord"> for each component in critical path</span></span></span></span></span></span></p>
<h4 id="contamination-delay-of-combinational-circuits">Contamination Delay of Combinational Circuits</h4>
<p>Determined by shortest path in a circuit.</p>
<h3 id="sequential-circuit">Sequential Circuit</h3>
<p>Rather trivial.</p>
<h2 id="pipeline">Pipeline</h2>
<h3 id="improve-combinational-circuit">Improve Combinational Circuit</h3>
<h4 id="problem-with-combinational-circuit-without-pipeline">Problem With Combinational Circuit Without Pipeline</h4>
<p>Complex Logic ─► Long Critical Path ─► High Propagation Delay ─► Reduced Clock Speed<br>
Inputs and outputs of each gate component have to be held until the final output is stable.</p>
<h4 id="goal">Goal</h4>
<p>Run complex processor at higher clock speed, and achieve higher performance.</p>
<h4 id="measurement-of-system-performance">Measurement of System Performance</h4>
<ol>
<li>Latency - The time delay between an entered input and its associated output.</li>
<li>Throughtput - The rate at which input or output is processed.</li>
</ol>
<h3 id="solution---pipeline">Solution - Pipeline</h3>
<h4 id="definition-1">Definition</h4>
<ol>
<li><strong>K-Stage pipeline</strong> is an acyclic circuit having exactly k <strong>registers</strong> on <strong>every</strong> input/ouput path.</li>
<li>Each pipeline stage needs a register on the output.</li>
<li>The clock period <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mrow><mi>C</mi><mi>L</mi><mi>K</mi></mrow></msub></mrow><annotation encoding="application/x-tex">t_{CLK}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> only needs to cover the <strong>longest</strong> propagation time from previous stage register to the next stage register.</li>
</ol>
<h4 id="latency--throughput-in-k-stage-pipeline">Latency &amp; Throughput in K-Stage Pipeline</h4>
<ol>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Latency</mtext><mo>=</mo><mi>K</mi><mo>×</mo><msub><mi>t</mi><mrow><mi>C</mi><mi>L</mi><mi>K</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\text{Latency} = K \times t_{CLK}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Latency</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Throughtput</mtext><mo>=</mo><mfrac><mn>1</mn><msub><mi>t</mi><mrow><mi>C</mi><mi>L</mi><mi>K</mi></mrow></msub></mfrac></mrow><annotation encoding="application/x-tex">\text{Throughtput} = \frac{1}{t_{CLK}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Throughtput</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2904em;vertical-align:-0.4453em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4453em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
</ol>
<blockquote>
<h4 id="understand-the-advantage-of-pipeline">Understand the Advantage of Pipeline</h4>
<p>The clock period only needs to cover the propagation delay between two registers from two adjacent stages, instead of the entire critical path. Therefore, we can shorten the clock period (higher clock rate), which increases throughput at cost of latency (not by much).</p>
</blockquote>
<blockquote>
<p><a href="https://www.ics.uci.edu/~swjun/courses/2022F-CS250P/materials/lec5%20-%20The%20processor.pdf">Pipelining Methodology Page 10</a><br>
<a href="https://www.ics.uci.edu/~swjun/courses/2022F-CS250P/materials/lec5%20-%20The%20processor.pdf">Number of Stages Balancing Between L and T Page 11</a><br>
<a href="https://www.ics.uci.edu/~swjun/courses/2022F-CS250P/materials/lec5%20-%20The%20processor.pdf">IMPORTANT Exam Question Page 13</a></p>
</blockquote>
<h3 id="example-pipelining-question">Example Pipelining Question</h3>
<p>Each module in the diagram is labeled with its latency.<br>
Request: Pipe this circuit to maximize throught put and minimize latency.</p>
<pre><code><code><div>     ┌─┐    ┌─┐    ┌─┐    ┌─┐    ┌─┐
────►│2├───►│3├───►│4├───►│2├───►│1├───►
     └┬┘    └─┘    └─┘    └─┘    └─┘
      │             ▲
      │     ┌─┐     │
      └────►│4├─────┘
            └─┘
</div></code></code></pre>
<h4 id="latency-and-throughput-without-pipelining">Latency and Throughput without Pipelining</h4>
<p>0-Stage or 1-Stage pipeline, the length of critical path is going down at first branch.</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>t</mi><mrow><mi>P</mi><mi>D</mi></mrow></msub><mo>=</mo><mn>13</mn></mrow><annotation encoding="application/x-tex">t_{PD} = 13
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">13</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Throughput</mtext><mo>=</mo><mfrac><mn>1</mn><mn>13</mn></mfrac></mrow><annotation encoding="application/x-tex">\text{Throughput} = \frac{1}{13}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Throughput</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">13</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Latency</mtext><mo>=</mo><mn>13</mn></mrow><annotation encoding="application/x-tex">\text{Latency} = 13
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Latency</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">13</span></span></span></span></span></p>
<h4 id="latency-with-4-stage-pipeline">Latency with 4-Stage Pipeline</h4>
<p>How do we come to the pipeline staging design? By instinction?</p>
<pre><code><code><div>         1      2      3             4

         │      │      │             │
     ┌─┐ │  ┌─┐ │  ┌─┐ │  ┌─┐    ┌─┐ │
────►│2├─┼─►│3├─┼─►│4├─┼─►│2├───►│1├─┼─►
     └┬┘ │  └─┘ │  └─┘ │  └─┘    └─┘ │
      │  │      │   ▲  │             │
      │  │  ┌─┐ │   │  │             │
      └──┼─►│4├─┼───┘  │             │
         │  └─┘ │      │             │
         │      │      │             │
</div></code></code></pre>
<p>The longest register to register propagation delay is 4 time unit.</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>t</mi><mrow><mi>C</mi><mi>L</mi><mi>K</mi></mrow></msub><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">t_{CLK} = 4
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Throughput</mtext><mo>=</mo><mfrac><mn>1</mn><msub><mi>t</mi><mrow><mi>C</mi><mi>L</mi><mi>K</mi></mrow></msub></mfrac><mo>=</mo><mfrac><mn>1</mn><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\text{Throughput} = \frac{1}{t_{CLK}} = \frac{1}{4}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Throughput</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1574em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Latency</mtext><mo>=</mo><mi>K</mi><mo>×</mo><msub><mi>t</mi><mrow><mi>C</mi><mi>L</mi><mi>K</mi></mrow></msub><mo>=</mo><mn>4</mn><mo>×</mo><mn>4</mn><mo>=</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">\text{Latency} = K\times t_{CLK} = 4\times 4 = 16
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord">Latency</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">16</span></span></span></span></span></p>
<h3 id="risc-pipeline">RISC Pipeline</h3>
<h4 id="von-neumann-model">Von Neumann Model</h4>
<p><strong>Data</strong> and <strong>instruction</strong> stored in the same main memory. Treating programs as data.<br>
<strong>CPU</strong> fetches, interprets, and executes intructions from <strong>memory</strong>.</p>
<h4 id="five-stage-pipeline">Five Stage Pipeline</h4>
<pre><code><code><div>   ┌───────┐    ┌────────┐   ┌─────────┐   ┌────────┐   ┌────────────┐
   │       │    │        │   │         │   │        │   │            │
┌─►│ Fetch ├───►│ Decode ├──►│ Execute ├──►│ Memory ├──►│ Write Back ├─┐
│  │       │    │        │   │         │   │        │   │            │ │
│  └───────┘    └────────┘   └─────────┘   └────────┘   └────────────┘ │
│                                                                      │
└──────────────────────────────────────────────────────────────────────┘
</div></code></code></pre>
<ol>
<li>Fetch - Get instruction</li>
<li>Decode - Instruction decode &amp; register read</li>
<li>Execute - Execute operation or calculate address</li>
<li>Memory Access - Request memory read or write</li>
<li>Write Back - Write execution result or memeory access result back to register</li>
</ol>
<blockquote>
<p>Assuming every stage takes a single clock cycle for simplicity's sake.</p>
</blockquote>
<h4 id="3-stage-pipeline-analysis">3-Stage Pipeline Analysis</h4>
<p>Memeory is not part of combinational circuit, memory accesses should be separate stages. 3-Stage is the most basic staging.</p>
<ol>
<li>Fetch - Fetch instruction from memory</li>
<li>Execute - Decode, Execute(ALU), Register File Access, Memory <strong>Request</strong></li>
<li>Write Back - Memory Read (Response to Request)</li>
</ol>
<p>The second stage is disproportionately long. The clock period needs to be long enough to cover the propagation delay of second stage. Some CPU time in first and third stage is idle.</p>
<pre><code><code><div>          ┌───┐----┌───────┬───┐----┐
instr. 1  │ F │    │  Exe  │ W │    |
          └───┘----└───────┴───┘----┘
                   ┌───┐----┌───────┬───┐----┐
instr. 2           │ F │    │  Exe  │ W │    |
                   └───┘----└───────┴───┘----┘
</div></code></code></pre>
<h4 id="why-5-stage-ideally-balanced-pipeline">Why 5-Stage? Ideally Balanced Pipeline</h4>
<pre><code><code><div>           ┌─────┬─────┬─────┬─────┬─────┐
instr. 1   │ Fet │ Dcd │ Exe │ Mem │ Wrt │
           └─────┴─────┴─────┴─────┴─────┘
                 ┌─────┬─────┬─────┬─────┬─────┐
instr. 2         │ Fet │ Dcd │ Exe │ Mem │ Wrt │
                 └─────┴─────┴─────┴─────┴─────┘
                       ┌─────┬─────┬─────┬─────┬─────┐
instr. 3               │ Fet │ Dcd │ Exe │ Mem │ Wrt │
                       └─────┴─────┴─────┴─────┴─────┘
</div></code></code></pre>
<p>Every stage have similar propagation delay and CPU is kept busy at each clock period.</p>
<h2 id="pipeline-hazard">Pipeline Hazard</h2>
<h3 id="read-after-write-data-hazard">Read-After-Write Data Hazard</h3>
<p>When the following instruction depends on register yet to be updated by previous instruction.</p>
<p>Register can be read in:</p>
<ol>
<li>Decode Stage</li>
</ol>
<p>Register can be written in:</p>
<ol>
<li>Execution Stage - Calculation result directly stored to register</li>
<li>Write Back Stage - Result write back to register</li>
</ol>
<h4 id="example-1">Example 1</h4>
<pre><code><code><div>instruction 1: add s0, s1, s2   &lt;- write to s0 at write back stage
instruction 2: add s4, s0, s3   &lt;- read s0 at decode stage
</div></code></code></pre>
<blockquote>
<p>add vs addi:<br>
add - two registers and stores the result in a register<br>
addi - add the register to an immediate value, store result in register</p>
</blockquote>
<p>Instruction 2 reads 4 cycle to early.</p>
<pre><code><code><div>           ┌──────┐
cycle 1    │ Fet1 │
           └──────┘
           ┌──────┬──────┐
cycle 2    │ Fet2 │ Dcd1 │
           └──────┴──────┘
                  ┌──────┬──────┐
cycle 3           │ Dcd2 │ Exe1 │
                  └──────┴──────┘
   .                 ▲
   .                 │
   .               read
                    r0                 ┌──────┐
cycle 5                                │ Wrt1 │
                                       └──────┘
                                          ▲
                                          │
                                        write
                                         r0
</div></code></code></pre>
<p>r0 is correct at cycle 4, the cycle after instruction 1 execution stage.</p>
<h4 id="example-2">Example 2</h4>
<pre><code><code><div>instruction 1: addi s0, zero, 1   &lt;- write to s0 at write back stage
instruction 2: addi s1, s0, 0   &lt;- read s0 at decode stage
</div></code></code></pre>
<p>Instruction 2 reads 4 cycle to early.</p>
<pre><code><code><div>           ┌──────┐
cycle 1    │ Fet1 │
           └──────┘
           ┌──────┬──────┐
cycle 2    │ Fet2 │ Dcd1 │
           └──────┴──────┘
                  ┌──────┬──────┐
cycle 3           │ Dcd2 │ Exe1 │
                  └──────┴──────┘
   .                 ▲
   .                 │
   .               read
                    r0                 ┌──────┐
cycle 5                                │ Wrt1 │
                                       └──────┘
                                          ▲
                                          │
                                        write
                                         r0
</div></code></code></pre>
<p>r0 is correct in cycle 6, the cycle after instruction 1 write back stage.</p>
<h3 id="load-use-data-hazard">Load-Use Data Hazard</h3>
<p>Data loaded by a <strong>load instruction</strong> yet available by the following instruction. Only solution is to stall.</p>
<h4 id="example">Example</h4>
<pre><code><code><div>instruction 1: lw s0, o(s2)     &lt;- load word to s0, write back stage
instruction 2: addi s1, s0, 1   &lt;- use data from s0, decode stage
</div></code></code></pre>
<p>Similar to <a href="#example-2">RAW hazard example 2</a>.</p>
<pre><code><code><div>           ┌──────┐
cycle 1    │ Fet1 │
           └──────┘
           ┌──────┬──────┐
cycle 2    │ Fet2 │ Dcd1 │
           └──────┴──────┘
                  ┌──────┬──────┐
cycle 3           │ Dcd2 │ Exe1 │
                  └──────┴──────┘
   .                 ▲
   .                 │
   .               read
                    r0                 ┌──────┐
cycle 5                                │ Wrt1 │
                                       └──────┘
                                          ▲
                                          │
                                        load
                                         r0
</div></code></code></pre>
<h3 id="control-hazard">Control Hazard</h3>
<p>Which instruction to fetch next depends on the previous execution result. Incorrect <strong>branch prediction</strong>.</p>
<h4 id="example-1">Example</h4>
<pre><code><code><div>instruction 1: beq s0, zero, elsewhere  &lt;- get next inst addr, execution stage
instruction 2: addi s1, s0, 1           &lt;- next instruction if no branch
</div></code></code></pre>
<pre><code><code><div>           ┌──────┐
cycle 1    │ Fet1 │
           └──────┘
           ┌──────┬──────┐
cycle 2    │ Fet2 │ Dcd1 │
           └──────┴──────┘
              ▲
              │
      which instruction? 
</div></code></code></pre>
<blockquote>
<p>BEQ Instruction:<br>
Jump to elsewhere if s0 == zero, else execute next instruction in line.</p>
</blockquote>
<h3 id="other-situations-and-hazards">Other Situations and Hazards</h3>
<ol>
<li>RAW - Hazard</li>
<li>WAW - No Hazard</li>
<li>WAR - No Hazard</li>
<li>RAR - No Hazard</li>
</ol>
<h3 id="solution-1">Solution</h3>
<h4 id="stall">Stall</h4>
<p>Stall the next instruction until the depended data is updated. Stalling will result in some components at stalled cycles not doing anything, <strong>Pipeline Bubbles</strong>.</p>
<h4 id="forward">Forward</h4>
<p>Forward <strong>execution stage</strong> result (of previous instruction) to the <em>corresponding stages</em> (of following instrucion). Also known as bypassing.</p>
<blockquote>
<p>Corresponding Stage of Each Hazard:</p>
<ol>
<li>RAW: forward to decode stage</li>
<li>Control: forward to fetch stage</li>
<li>Load-Use: result materialized only after write back stage, forwarding won't work</li>
</ol>
</blockquote>
<p>Forwarding may still cause stalling in <em>deeper pipeline</em>, if the execution stage takes multiple cycles.</p>
<blockquote>
<p>Deeper Pipeline:<br>
Pipeline scheme with more stages</p>
</blockquote>
<h4 id="non-architecture-solution">Non-architecture Solution</h4>
<p>Code scheduling done with <strong>best effort</strong> by compiler. Reorder the register to avoid hazards.</p>
<h4 id="branch-delay-slot">Branch Delay Slot</h4>
<p>Try fetch another useful instruction in the next cycle following a branch instruction. Not working great IRL.</p>
<h2 id="branch-prediction">Branch Prediction</h2>
<p>Brach prediction is one of the countmesures of control hazard.</p>
<h3 id="branch-predictor">Branch Predictor</h3>
<h4 id="static-branch-prediction">Static Branch Prediction</h4>
<p>Make fixed predicition.<br>
Example:</p>
<ol>
<li>Take backward branch</li>
<li>Not take forward branch</li>
</ol>
<h4 id="dynamic-branch-prediction">Dynamic Branch Prediction</h4>
<p>Predict future branch at run-time based on prediction history.</p>
<h3 id="handle-mis-prediction">Handle Mis-prediction</h3>
<p>Nullify all mis-predicted previous stages.</p>
<h4 id="example-handle-method---epoch-based">Example Handle Method - Epoch Based</h4>
<ol>
<li>All fetched instruction belong to ane <strong>Epoch</strong> number</li>
<li>Instruction retains epoch number throught the pipeline</li>
<li>In case of mispredictions, increase global epoch number by one</li>
<li>Ignore all instruction with older epoch number arrived at execution stage</li>
</ol>
<h3 id="example-1-bit-predictor">Example 1-bit Predictor</h3>
<p>1-bit brach history table.</p>
<pre><code><code><div>0 not taken
1 taken
</div></code></code></pre>
<pre><code><code><div>              T
           ┌───┐
       T   │   │
   ┌─┬───►┌┴┐  │
┌─►│0│    │1│◄─┘
│  └┬┘◄───┴─┘
│   │   NT
└───┘
 NT
</div></code></code></pre>
<h3 id="example-2-bit-predictor">Example 2-bit Predictor</h3>
<p>2-bit branch history table.</p>
<pre><code><code><div>00 strongly not taken
01 weakly not taken
10 weakly taken
11 strongly taken
</div></code></code></pre>
<pre><code><code><div>                           T
                          ┌───┐
       T      T      T    │   │
   ┌──┬──►┌──┬──►┌──┬──►┌─┴┐  │
┌─►│00│   │01│   │10│   │11│◄─┘
│  └┬─┘◄──┴──┘◄──┴──┘◄──┴──┘
│   │   NT     NT     NT
└───┘
 NT
</div></code></code></pre>
<p>Question type: given an sequence of Ts, Ns, and initial predictor value, find the mispredictions.</p>
<h3 id="other-improvements">Other Improvements</h3>
<h4 id="branchless-programming">Branchless Programming</h4>
<h4 id="compiler-loop-unrolling">Compiler Loop Unrolling</h4>
<h2 id="superscale">Superscale</h2>
<p>Idealy pipelined processor can handle one instruction per cycle. 1 IPC, 1 CPI.<br>
Superscaler's goal is to process multiple instructions per cycle, which requires multiple pipeline hardware instances. N-way superscaler processor handles N instructions per cycle. N IPC, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mtext>N</mtext></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{\text{N}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">N</span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> CPI.</p>
<blockquote>
<p>Ideal is nice, but in reality the design is complicated and performs badly due to hazards.</p>
</blockquote>
<h2 id="memory-system-and-cache">Memory System and Cache</h2>
<h3 id="motivation-1">Motivation</h3>
<p>CPU fast Memory slow.</p>
<h3 id="sram--dram">SRAM &amp; DRAM</h3>
<h4 id="sram">SRAM</h4>
<p>Static Random Access Memory. Used for register files and caches.</p>
<ol>
<li>Expensive</li>
<li>Fast</li>
<li>Transistor</li>
</ol>
<blockquote>
<p>Large SRAM subjects to propagation delay, which not only drives up cost but also slows down the speed.</p>
</blockquote>
<h4 id="dram">DRAM</h4>
<p>Dynamic Random Access Memory. Used for main memory.</p>
<ol>
<li>Cheap</li>
<li>Slow</li>
<li>Capacitor, needs refreshing</li>
</ol>
<blockquote>
<p>Can afford to make large DRAM.</p>
</blockquote>
<h3 id="cache">Cache</h3>
<p>Cache hierarchy sets between processor and main memory. It abstracts the memory as single countinuous address space and speeds up data operations.</p>
<h4 id="multi-layer-cache-architecture">Multi-Layer Cache Architecture</h4>
<pre><code><code><div>Level    Size     Latency
─────────────────────────
L1       64KB     &lt;5  
L2       256KB    &lt;20 
L3       ~2MB     &lt;50 
DRAM     ~GBs     Slow AF
</div></code></code></pre>
<pre><code><code><div>┌─────────────────────────────────┐
│ ┌─────────────┐ ┌─────────────┐ │
│ │ ┌─────────┐ │ │ ┌─────────┐ │ │
│ │ │  Core1  │ │ │ │  Core2  │ │ │
│ │ └─────────┘ │ │ └─────────┘ │ │
│ │ ┌───┐ ┌───┐ │ │ ┌───┐ ┌───┐ │ │
│ │ │L1i│ │L1d│ │ │ │L1i│ │L1d│ │ │
│ │ └───┘ └───┘ │ │ └───┘ └───┘ │ │
│ │ ┌─────────┐ │ │ ┌─────────┐ │ │
│ │ │   L2    │ │ │ │   L2    │ │ │
│ │ └─────────┘ │ │ └─────────┘ │ │
│ └─────────────┘ └─────────────┘ │
│   ┌─────────────────────────┐   │
│   │           L3            │   │
│   └─────────────────────────┘   │
└─────────────────────────────────┘
</div></code></code></pre>
<h3 id="cache-operation">Cache Operation</h3>
<h4 id="basic-unit-of-cache-operation">Basic Unit of Cache Operation</h4>
<p>Block or Cache line, multi-word data.</p>
<h4 id="fetch-data-to-cache">Fetch Data to Cache</h4>
<p>Prefetch data might be used in the future to fastest level of cache.<br>
Two phenomena we can use to our advantage:</p>
<ul>
<li>
<p>Temporal Locality</p>
<p>If a address location has been accessed recently, it's likely to be <strong>accessed again</strong> soon.<br>
Methond: Cache recently accessed address.</p>
</li>
<li>
<p>Spatial Locality</p>
<p>If a address location has been accessed recently, its <strong>nearby locations</strong> will be accessed soon.<br>
Method: Pre-fetch predicted future data.</p>
</li>
</ul>
<h4 id="access-data">Access Data</h4>
<p>Try find data in the highest cache level. If misses try block data from subsequent lower (and slower) level, time taken was called cache miss penalty.</p>
<h3 id="cache-miss">Cache Miss</h3>
<h4 id="compulsory-misses">Compulsory Misses</h4>
<p>Initial access of a block.</p>
<h4 id="capacity-misses">Capacity Misses</h4>
<p>Replaced a block due to limited cache size, which is later accessed.</p>
<h4 id="conflic-misses">Conflic Misses</h4>
<p>Several blocks mapped to the same cache set.</p>
<h3 id="cache-schemes">Cache Schemes</h3>
<h4 id="direct-mapped-cache">Direct Mapped Cache</h4>
<p>Use the lower bits of block address as cache address. Each block in main memory mapped to <strong>one</strong> location in cache.</p>
<h5 id="why-use-lower-bits">Why use lower bits?</h5>
<p>Allow consecutive memeory location to coexist in cache, take advantage of spacial locality.</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Cache_Addr</mtext><mo>=</mo><mtext>Memory_Addr </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext> Cache_Size</mtext></mrow><annotation encoding="application/x-tex">\text{Cache\_Addr} = \text{Memory\_Addr}\ mod\ \text{Cache\_Size}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0044em;vertical-align:-0.31em;"></span><span class="mord text"><span class="mord">Cache_Addr</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0044em;vertical-align:-0.31em;"></span><span class="mord text"><span class="mord">Memory_Addr</span></span><span class="mspace"> </span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mspace"> </span><span class="mord text"><span class="mord">Cache_Size</span></span></span></span></span></span></p>
<h5 id="how-do-we-know-block-in-cache">How do we know block in cache?</h5>
<p>Use the high-order bits as <strong>Tag</strong>, mapped to <strong>Valid Bit</strong>, indicating the presence of block.</p>
<h5 id="how-to-load-a-multi-byte-block">How to load a multi-byte block?</h5>
<p>If cache line size is n bytes, used the lowest n address bit as <strong>Byte Offset Bits</strong>.</p>
<h4 id="fully-associative">Fully Associative</h4>
<p>Any memory address can be mapped to any cache location. No conflict misses, but large management overhead.</p>
<h4 id="n-way-set-associative">N-way Set Associative</h4>
<p>In an effort to reduce conflict misses, design a cache system using multiply parallel Direct Map Caches.<br>
#Row = #Set<br>
#Column = #Way = Set Size<br>
Each address can be mapped to any <em>way</em> of the specific <em>set</em>. Fixed row, any column.</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Cache_Index</mtext><mo>=</mo><mtext>Memory_Addr </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext> </mtext><mo stretchy="false">(</mo><mfrac><mtext>Cache_Size</mtext><mtext>#Ways</mtext></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{Cache\_Index} = \text{Memory\_Addr}\ mod\ (\frac{\text{Cache\_Size}}{\text{\#Ways}})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0044em;vertical-align:-0.31em;"></span><span class="mord text"><span class="mord">Cache_Index</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2749em;vertical-align:-0.8804em;"></span><span class="mord text"><span class="mord">Memory_Addr</span></span><span class="mspace"> </span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3944em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">#Ways</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.7em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">Cache_Size</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>